import os

import numpy as np

os.chdir("../../_DataFolder/jjvv")
energy = "15000"
mjj = 10000.0
pt = 200.0

# smcs = (0.8687625940999998 + 0.8689588463999999 + 0.8685616985 + 0.8689317255) * 0.25
# cslst = [smcs, 0.003214842, 0.00354594, 0.0038274500000000005, 0.00412465]

# smcs = (1.4545246348199998 + 1.4549129190100003 + 1.4545246348199998 + 1.4551894923700002) * 0.25
# cslst = [smcs, 0.001146202, 0.0013776040000000002, 0.000956396, 0.00092386]

# smcs = (1.6092715916299998 + 1.6083979168200002 + 1.6083697073100003 + 1.60875317509) * 0.25
# cslst = [smcs, 0.0011169679999999999, 0.001439118, 0.001339884, 0.001266457]

smcs = (1.8984457019500003 + 1.89843048006 + 1.8997281884 + 1.8985286962699996) * 0.25
cslst = [smcs, 0.0011408780000000001, 0.00133583, 0.0017771899999999999, 0.001614697]

eventnumber = [1000000, 300000, 300000, 300000, 300000]
headers = ["sm", "fgt0-", "fgt1-", "fgt2-", "fgt3-"]
print(smcs)
for i in range(0, 5):
    print("===== " + headers[i] + " =====")
    data = np.loadtxt("ScanFeatures/feature/" + headers[i] + energy + ".csv", delimiter=',')
    print([len(data), len(data) * cslst[i] / eventnumber[i]])
    data = data[data[:, 1] > pt]
    print([len(data), len(data) * cslst[i] / eventnumber[i]])
    data = data[data[:, 0] > mjj]
    print([len(data), len(data) * cslst[i] / eventnumber[i]])


"""
====================== 1500 ====================== 
0.8688037161249998
===== sm =====
[832056, 0.7228933448241028]
[617710, 0.5366687434875737]
[1019, 0.0008853109867313749]
===== fgt0- =====
[299961, 0.00321442407054]
[293918, 0.0031496664365199996]
[232203, 0.0024883198564199997]
===== fgt1- =====
[297833, 0.0035203264934000004]
[293504, 0.0034691585792]
[191932, 0.0022685978536]
===== fgt2- =====
[299347, 0.003819118917166667]
[293203, 0.003740732741166667]
[223249, 0.002848247950166667]
===== fgt3- =====
[298200, 0.0040999020999999995]
[294049, 0.004042830692833333]
[199644, 0.002744872082]

Process finished with exit code 0


====================== 5000 ====================== 
1.4547879202549998
===== sm =====
[819281, 1.1918801020944365]
[349313, 0.5081763327880348]
[176, 0.00025604267396487994]
===== fgt0- =====
[299996, 0.0011461867173066667]
[292700, 0.0011183110846666668]
[251531, 0.0009610177842066667]
===== fgt1- =====
[298704, 0.0013716527507200002]
[292363, 0.0013425347941733335]
[231378, 0.00106249086104]
===== fgt2- =====
[299683, 0.0009553854082266666]
[291868, 0.0009304712924266666]
[250514, 0.0007986352918133333]
===== fgt3- =====
[298940, 0.0009205956946666667]
[292928, 0.0009020815402666667]
[236386, 0.0007279585665333334]

Process finished with exit code 0


====================== 7000 ====================== 
1.6086980977125003
===== sm =====
[817751, 1.3155144781024948]
[330649, 0.5319144173105405]
[65, 0.00010456537635131253]
===== fgt0- =====
[300000, 0.0011169679999999999]
[294700, 0.0010972348986666664]
[227143, 0.0008457048747466666]
===== fgt1- =====
[298891, 0.00143379806046]
[294323, 0.00141188509038]
[213199, 0.00102272839494]
===== fgt2- =====
[299706, 0.00133857091368]
[294132, 0.00131367586896]
[231663, 0.00103467182364]
===== fgt3- =====
[299063, 0.0012625014326366666]
[294613, 0.0012437156538033331]
[217063, 0.0009163365193033333]

Process finished with exit code 0

====================== 15000 ====================== 
1.89878326667
===== sm =====
[812332, 1.5424424085805744]
[135054, 0.2564382752968502]
[28, 5.316593146676e-05]  
===== fgt0- =====
[299999, 0.0011408741970733334]
[291909, 0.00111010852034]
[240234, 0.0009135922848400001]
===== fgt1- =====
[299170, 0.0013321342036666669]
[292276, 0.0013014368302666668]
[233004, 0.0010375124444]
===== fgt2- =====
[299801, 0.0017760111306333332]
[291700, 0.0017280210766666664]
[246238, 0.0014587057040666665]
===== fgt3- =====
[299355, 0.00161122540145]
[292335, 0.0015734414916499999]
[235904, 0.0012697116036266669]

Process finished with exit code 0

"""

